Docker? What is it?

Оверхед на гипервизор, большие образы, сложно менеджить.

Разница веиртуалки и контейнера:
1) Вирткалка - виртуализщирует железо для запуска гоствой OC
Контейнер же использует ядро хостовой системы
2) В виртуалке может работать любая OC
3) Виртуалка хорошо изолирована, контейнер же изолирован хуже

Есть баги при котором из контейнера можно вылезти на хост.

Эра контейнеров:
1 контейнер - 1 процесс
все зависимости внутри контейнера
чем меньше образ, тем лучше

Docker:
Docker Deamon - занимается запуком
Docker CLI
Docker file
Image
Container
Docker Registry

Docker Deamon:
серверная часть
работает на хост машине
скачивает образысобирает логи
создает новый образсоздает сеть между контейнерами

CLI:
консольная утилита
и локальная и по сети

docker ps - контейнеры
docker images - имеджи

Image - по сути, это пакет, он имеет хэш + тэг

Dockerfile
это инструкция как собрать образ,
практически каждая строска - это новый слой,
чем больше слоев, тем пухлее контейнер и он медленнее раскатывается
на инвайроменте.

docker search <название> - найдет все имеджи на dockerhub

docker build -t <тэг> <путь где есть докер файл>

docker run <имя образа>

docker ps -a показать все контейнеры

docker rm <название контейнера>

docker run с -d запуск как демон, т.е. отдал нам консольная

docker rmi <> удалить имедж

COPY и ADD в Dockerfile
кажется что они занимаются одним и тем же,
но если не знаете что лучше то используйте COPY
ADD может подтягивать ресурсы по урлу, разархивировать и тд на лету

docker inspect <название контейнера>

docker logs <контейнер>

docker run --name nginx -p 80:80

сначала порт хоста, потом порт контейнера

docker exec -it <имя контейнера> /bin/bash
попадает внутрь контейнера

-v <папка на хосте>:<папка в контейнере -монтаж папки внутрь контейнера